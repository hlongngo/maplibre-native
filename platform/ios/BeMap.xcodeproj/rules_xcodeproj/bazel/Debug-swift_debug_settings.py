#!/usr/bin/python3

"""An lldb module that registers a stop hook to set swift settings."""

import lldb
import re

# Order matters, it needs to be from the most nested to the least
_BUNDLE_EXTENSIONS = [
    ".framework",
    ".xctest",
    ".appex",
    ".bundle",
    ".app",
]

_TRIPLE_MATCH = re.compile(r"([^-]+-[^-]+)(-\D+)[^-]*(-.*)?")

_SETTINGS = {
    "arm64-apple-ios App.app/App": {
        "c": "",
    },
    "arm64-apple-ios BenchmarkApp.app/BenchmarkApp": {
        "c": "",
    },
    "arm64-apple-ios CppUnitTests.xctest/CppUnitTests": {
        "c": "",
    },
    "arm64-apple-ios CppUnitTestsApp.app/CppUnitTestsApp": {
        "c": "",
    },
    "arm64-apple-ios MapLibreApp.app/MapLibreApp": {
        "c": "-I$(SRCROOT)/platform/darwin/include -I$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/platform/darwin/include -I$(SRCROOT)/platform/darwin/src -I$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/platform/darwin/src -I$(SRCROOT)/platform/ios/src -I$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/platform/ios/src -I$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/_virtual_includes/unordered_dense -I$(SRCROOT)/platform/ios/vendor/SMCalloutView -I$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/platform/ios/vendor/SMCalloutView -iquote$(PROJECT_DIR) -iquote$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin -isystem$(SRCROOT)/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/include -isystem$(SRCROOT)/src -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/src -isystem$(SRCROOT)/vendor/boost/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/boost/include -isystem$(SRCROOT)/vendor/earcut.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/earcut.hpp/include -isystem$(SRCROOT)/vendor/eternal/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/eternal/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/jni.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/deps/jni.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/variant/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/deps/variant/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/args -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/extras/args -isystem$(SRCROOT)/vendor/mapbox-base/extras/expected-lite/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/extras/expected-lite/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/filesystem/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/extras/filesystem/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/rapidjson/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/extras/rapidjson/include -isystem$(SRCROOT)/vendor/mapbox-base/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/mapbox-base/include -isystem$(SRCROOT)/vendor/parsedate -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/parsedate -isystem$(SRCROOT)/vendor/PMTiles/cpp -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/PMTiles/cpp -isystem$(SRCROOT)/vendor/polylabel/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/polylabel/include -isystem$(SRCROOT)/vendor/protozero/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/protozero/include -isystem$(SRCROOT)/vendor/unique_resource -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/unique_resource -isystem$(SRCROOT)/vendor/vector-tile/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/vector-tile/include -isystem$(SRCROOT)/vendor/wagyu/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/wagyu/include -isystem$(SRCROOT)/vendor/icu/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/icu/include -isystem$(SRCROOT)/vendor/csscolorparser -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/vendor/csscolorparser -isystem$(SRCROOT)/platform/default/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/platform/default/include -DRAPIDJSON_HAS_STDSTRING=1 -DMLN_RENDER_BACKEND_OPENGL=1 -DMLN_LEGACY_RENDERER=1 -DMLN_DRAWABLE_RENDERER=0 -DGLES_SILENCE_DEPRECATION=1 -DGL_SILENCE_DEPRECATION=1 -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/platform/darwin/darwin-objc_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/platform/darwin/darwin-objcpp_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/platform/ios/vendor/SMCalloutView_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/platform/objc-sdk_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/platform/objcpp-sdk_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min16.0-applebin_ios-ST-7f0325d51a10/bin/platform/ios-sdk_modulemap/_/module.modulemap -O0 -DDEBUG=1 -fstack-protector -fstack-protector-all",
    },
    "arm64-apple-ios RenderTest.xctest/RenderTest": {
        "c": "",
    },
    "arm64-apple-ios RenderTestApp.app/RenderTestApp": {
        "c": "",
    },
    "arm64-apple-ios ios_test.xctest/ios_test": {
        "c": "-I$(SRCROOT)/platform/darwin/include -I$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/darwin/include -I$(SRCROOT)/platform/darwin/src -I$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/darwin/src -I$(SRCROOT)/platform/ios/src -I$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/ios/src -I$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/_virtual_includes/unordered_dense -I$(SRCROOT)/platform/ios/vendor/SMCalloutView -I$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/ios/vendor/SMCalloutView -iquote$(PROJECT_DIR) -iquote$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin -isystem$(SRCROOT)/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/include -isystem$(SRCROOT)/src -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/src -isystem$(SRCROOT)/vendor/boost/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/boost/include -isystem$(SRCROOT)/vendor/earcut.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/earcut.hpp/include -isystem$(SRCROOT)/vendor/eternal/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/eternal/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/jni.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/jni.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/variant/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/variant/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/args -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/extras/args -isystem$(SRCROOT)/vendor/mapbox-base/extras/expected-lite/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/extras/expected-lite/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/filesystem/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/extras/filesystem/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/rapidjson/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/extras/rapidjson/include -isystem$(SRCROOT)/vendor/mapbox-base/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/include -isystem$(SRCROOT)/vendor/parsedate -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/parsedate -isystem$(SRCROOT)/vendor/PMTiles/cpp -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/PMTiles/cpp -isystem$(SRCROOT)/vendor/polylabel/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/polylabel/include -isystem$(SRCROOT)/vendor/protozero/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/protozero/include -isystem$(SRCROOT)/vendor/unique_resource -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/unique_resource -isystem$(SRCROOT)/vendor/vector-tile/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/vector-tile/include -isystem$(SRCROOT)/vendor/wagyu/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/wagyu/include -isystem$(SRCROOT)/vendor/icu/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/icu/include -isystem$(SRCROOT)/vendor/csscolorparser -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/csscolorparser -isystem$(SRCROOT)/platform/default/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/default/include -DRAPIDJSON_HAS_STDSTRING=1 -DMLN_RENDER_BACKEND_OPENGL=1 -DMLN_LEGACY_RENDERER=1 -DMLN_DRAWABLE_RENDERER=0 -DGLES_SILENCE_DEPRECATION=1 -DGL_SILENCE_DEPRECATION=1 -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/darwin/darwin-objc_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/darwin/darwin-objcpp_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/ios/vendor/SMCalloutView_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/objc-sdk_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/objcpp-sdk_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/ios-sdk_modulemap/_/module.modulemap -O0 -DDEBUG=1 -fstack-protector -fstack-protector-all -iquote$(PROJECT_DIR) -iquote$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin -isystem$(SRCROOT)/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/include -isystem$(SRCROOT)/src -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/src -isystem$(SRCROOT)/vendor/boost/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/boost/include -isystem$(SRCROOT)/vendor/earcut.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/earcut.hpp/include -isystem$(SRCROOT)/vendor/eternal/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/eternal/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/jni.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/jni.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/variant/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/deps/variant/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/args -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/extras/args -isystem$(SRCROOT)/vendor/mapbox-base/extras/expected-lite/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/extras/expected-lite/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/filesystem/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/extras/filesystem/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/rapidjson/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/extras/rapidjson/include -isystem$(SRCROOT)/vendor/mapbox-base/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/mapbox-base/include -isystem$(SRCROOT)/vendor/parsedate -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/parsedate -isystem$(SRCROOT)/vendor/PMTiles/cpp -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/PMTiles/cpp -isystem$(SRCROOT)/vendor/polylabel/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/polylabel/include -isystem$(SRCROOT)/vendor/protozero/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/protozero/include -isystem$(SRCROOT)/vendor/unique_resource -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/unique_resource -isystem$(SRCROOT)/vendor/vector-tile/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/vector-tile/include -isystem$(SRCROOT)/vendor/wagyu/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/wagyu/include -isystem$(SRCROOT)/vendor/icu/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/icu/include -isystem$(SRCROOT)/vendor/csscolorparser -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/vendor/csscolorparser -isystem$(SRCROOT)/platform/default/include -isystem$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin/platform/default/include -O0 -fstack-protector -fstack-protector-all",
        "f": [
            "$(DEVELOPER_DIR)/Platforms/iPhoneOS.platform/Developer/Library/Frameworks",
            "$(SDKROOT)/Developer/Library/Frameworks",
        ],
        "s": [
            "$(DEVELOPER_DIR)/Platforms/iPhoneOS.platform/Developer/usr/lib",
        ],
    },
    "arm64-apple-ios uitest.xctest/uitest": {
        "c": "-iquote$(PROJECT_DIR) -iquote$(BAZEL_OUT)/ios_arm64-dbg-ios-arm64-min12.0-applebin_ios-ST-2008bd9a2f75/bin -O0 -DDEBUG=1 -fstack-protector -fstack-protector-all",
        "f": [
            "$(DEVELOPER_DIR)/Platforms/iPhoneOS.platform/Developer/Library/Frameworks",
            "$(SDKROOT)/Developer/Library/Frameworks",
        ],
        "s": [
            "$(DEVELOPER_DIR)/Platforms/iPhoneOS.platform/Developer/usr/lib",
        ],
    },
    "arm64-apple-ios-simulator App.app/App": {
        "c": "",
    },
    "arm64-apple-ios-simulator BenchmarkApp.app/BenchmarkApp": {
        "c": "",
    },
    "arm64-apple-ios-simulator CppUnitTests.xctest/CppUnitTests": {
        "c": "",
    },
    "arm64-apple-ios-simulator CppUnitTestsApp.app/CppUnitTestsApp": {
        "c": "",
    },
    "arm64-apple-ios-simulator MapLibreApp.app/MapLibreApp": {
        "c": "-I$(SRCROOT)/platform/darwin/include -I$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/platform/darwin/include -I$(SRCROOT)/platform/darwin/src -I$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/platform/darwin/src -I$(SRCROOT)/platform/ios/src -I$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/platform/ios/src -I$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/_virtual_includes/unordered_dense -I$(SRCROOT)/platform/ios/vendor/SMCalloutView -I$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/platform/ios/vendor/SMCalloutView -iquote$(PROJECT_DIR) -iquote$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin -isystem$(SRCROOT)/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/include -isystem$(SRCROOT)/src -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/src -isystem$(SRCROOT)/vendor/boost/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/boost/include -isystem$(SRCROOT)/vendor/earcut.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/earcut.hpp/include -isystem$(SRCROOT)/vendor/eternal/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/eternal/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/jni.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/deps/jni.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/variant/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/deps/variant/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/args -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/extras/args -isystem$(SRCROOT)/vendor/mapbox-base/extras/expected-lite/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/extras/expected-lite/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/filesystem/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/extras/filesystem/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/rapidjson/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/extras/rapidjson/include -isystem$(SRCROOT)/vendor/mapbox-base/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/mapbox-base/include -isystem$(SRCROOT)/vendor/parsedate -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/parsedate -isystem$(SRCROOT)/vendor/PMTiles/cpp -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/PMTiles/cpp -isystem$(SRCROOT)/vendor/polylabel/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/polylabel/include -isystem$(SRCROOT)/vendor/protozero/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/protozero/include -isystem$(SRCROOT)/vendor/unique_resource -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/unique_resource -isystem$(SRCROOT)/vendor/vector-tile/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/vector-tile/include -isystem$(SRCROOT)/vendor/wagyu/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/wagyu/include -isystem$(SRCROOT)/vendor/icu/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/icu/include -isystem$(SRCROOT)/vendor/csscolorparser -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/vendor/csscolorparser -isystem$(SRCROOT)/platform/default/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/platform/default/include -DRAPIDJSON_HAS_STDSTRING=1 -DMLN_RENDER_BACKEND_OPENGL=1 -DMLN_LEGACY_RENDERER=1 -DMLN_DRAWABLE_RENDERER=0 -DGLES_SILENCE_DEPRECATION=1 -DGL_SILENCE_DEPRECATION=1 -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/platform/darwin/darwin-objc_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/platform/darwin/darwin-objcpp_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/platform/ios/vendor/SMCalloutView_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/platform/objc-sdk_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/platform/objcpp-sdk_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min16.0-applebin_ios-ST-48bc82c65e95/bin/platform/ios-sdk_modulemap/_/module.modulemap -O0 -DDEBUG=1 -fstack-protector -fstack-protector-all",
    },
    "arm64-apple-ios-simulator RenderTest.xctest/RenderTest": {
        "c": "",
    },
    "arm64-apple-ios-simulator RenderTestApp.app/RenderTestApp": {
        "c": "",
    },
    "arm64-apple-ios-simulator ios_test.xctest/ios_test": {
        "c": "-I$(SRCROOT)/platform/darwin/include -I$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/darwin/include -I$(SRCROOT)/platform/darwin/src -I$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/darwin/src -I$(SRCROOT)/platform/ios/src -I$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/ios/src -I$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/_virtual_includes/unordered_dense -I$(SRCROOT)/platform/ios/vendor/SMCalloutView -I$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/ios/vendor/SMCalloutView -iquote$(PROJECT_DIR) -iquote$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin -isystem$(SRCROOT)/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/include -isystem$(SRCROOT)/src -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/src -isystem$(SRCROOT)/vendor/boost/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/boost/include -isystem$(SRCROOT)/vendor/earcut.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/earcut.hpp/include -isystem$(SRCROOT)/vendor/eternal/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/eternal/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/jni.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/jni.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/variant/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/variant/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/args -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/extras/args -isystem$(SRCROOT)/vendor/mapbox-base/extras/expected-lite/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/extras/expected-lite/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/filesystem/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/extras/filesystem/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/rapidjson/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/extras/rapidjson/include -isystem$(SRCROOT)/vendor/mapbox-base/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/include -isystem$(SRCROOT)/vendor/parsedate -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/parsedate -isystem$(SRCROOT)/vendor/PMTiles/cpp -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/PMTiles/cpp -isystem$(SRCROOT)/vendor/polylabel/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/polylabel/include -isystem$(SRCROOT)/vendor/protozero/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/protozero/include -isystem$(SRCROOT)/vendor/unique_resource -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/unique_resource -isystem$(SRCROOT)/vendor/vector-tile/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/vector-tile/include -isystem$(SRCROOT)/vendor/wagyu/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/wagyu/include -isystem$(SRCROOT)/vendor/icu/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/icu/include -isystem$(SRCROOT)/vendor/csscolorparser -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/csscolorparser -isystem$(SRCROOT)/platform/default/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/default/include -DRAPIDJSON_HAS_STDSTRING=1 -DMLN_RENDER_BACKEND_OPENGL=1 -DMLN_LEGACY_RENDERER=1 -DMLN_DRAWABLE_RENDERER=0 -DGLES_SILENCE_DEPRECATION=1 -DGL_SILENCE_DEPRECATION=1 -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/darwin/darwin-objc_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/darwin/darwin-objcpp_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/ios/vendor/SMCalloutView_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/objc-sdk_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/objcpp-sdk_modulemap/_/module.modulemap -fmodule-map-file=$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/ios-sdk_modulemap/_/module.modulemap -O0 -DDEBUG=1 -fstack-protector -fstack-protector-all -iquote$(PROJECT_DIR) -iquote$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin -isystem$(SRCROOT)/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/include -isystem$(SRCROOT)/src -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/src -isystem$(SRCROOT)/vendor/boost/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/boost/include -isystem$(SRCROOT)/vendor/earcut.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/earcut.hpp/include -isystem$(SRCROOT)/vendor/eternal/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/eternal/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/cheap-ruler-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/geojson.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/geojson-vt-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/geometry.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/jni.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/jni.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/pixelmatch-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/shelf-pack-cpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/supercluster.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/deps/variant/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/deps/variant/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/args -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/extras/args -isystem$(SRCROOT)/vendor/mapbox-base/extras/expected-lite/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/extras/expected-lite/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/filesystem/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/extras/filesystem/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/extras/kdbush.hpp/include -isystem$(SRCROOT)/vendor/mapbox-base/extras/rapidjson/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/extras/rapidjson/include -isystem$(SRCROOT)/vendor/mapbox-base/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/mapbox-base/include -isystem$(SRCROOT)/vendor/parsedate -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/parsedate -isystem$(SRCROOT)/vendor/PMTiles/cpp -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/PMTiles/cpp -isystem$(SRCROOT)/vendor/polylabel/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/polylabel/include -isystem$(SRCROOT)/vendor/protozero/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/protozero/include -isystem$(SRCROOT)/vendor/unique_resource -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/unique_resource -isystem$(SRCROOT)/vendor/vector-tile/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/vector-tile/include -isystem$(SRCROOT)/vendor/wagyu/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/wagyu/include -isystem$(SRCROOT)/vendor/icu/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/icu/include -isystem$(SRCROOT)/vendor/csscolorparser -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/vendor/csscolorparser -isystem$(SRCROOT)/platform/default/include -isystem$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin/platform/default/include -O0 -fstack-protector -fstack-protector-all",
        "f": [
            "$(DEVELOPER_DIR)/Platforms/iPhoneSimulator.platform/Developer/Library/Frameworks",
            "$(SDKROOT)/Developer/Library/Frameworks",
        ],
        "s": [
            "$(DEVELOPER_DIR)/Platforms/iPhoneSimulator.platform/Developer/usr/lib",
        ],
    },
    "arm64-apple-ios-simulator uitest.xctest/uitest": {
        "c": "-iquote$(PROJECT_DIR) -iquote$(BAZEL_OUT)/ios_sim_arm64-dbg-ios-sim_arm64-min12.0-applebin_ios-ST-681a9f1df701/bin -O0 -DDEBUG=1 -fstack-protector -fstack-protector-all",
        "f": [
            "$(DEVELOPER_DIR)/Platforms/iPhoneSimulator.platform/Developer/Library/Frameworks",
            "$(SDKROOT)/Developer/Library/Frameworks",
        ],
        "s": [
            "$(DEVELOPER_DIR)/Platforms/iPhoneSimulator.platform/Developer/usr/lib",
        ],
    },
}

def __lldb_init_module(debugger, _internal_dict):
    # Register the stop hook when this module is loaded in lldb
    ci = debugger.GetCommandInterpreter()
    res = lldb.SBCommandReturnObject()
    ci.HandleCommand(
        "target stop-hook add -P swift_debug_settings.StopHook",
        res,
    )
    if not res.Succeeded():
        print(f"""\
Failed to register Swift debug options stop hook:

{res.GetError()}
Please file a bug report here: \
https://github.com/MobileNativeFoundation/rules_xcodeproj/issues/new?template=bug.md
""")
        return

def _get_relative_executable_path(module):
    for extension in _BUNDLE_EXTENSIONS:
        prefix, _, suffix = module.rpartition(extension)
        if prefix:
            return prefix.split("/")[-1] + extension + suffix
    return module.split("/")[-1]

class StopHook:
    "An lldb stop hook class, that sets swift settings for the current module."

    def __init__(self, _target, _extra_args, _internal_dict):
        pass

    def handle_stop(self, exe_ctx, _stream):
        "Method that is called when the user stops in lldb."
        module = exe_ctx.frame.module
        if not module:
            return

        module_name = module.file.GetDirectory() + "/" + module.file.GetFilename()
        versionless_triple = _TRIPLE_MATCH.sub(r"\1\2\3", module.GetTriple())
        executable_path = _get_relative_executable_path(module_name)
        key = f"{versionless_triple} {executable_path}"

        settings = _SETTINGS.get(key)

        if settings:
            frameworks = " ".join([
                f'"{path}"'
                for path in settings.get("f", [])
            ])
            if frameworks:
                lldb.debugger.HandleCommand(
                    f"settings set -- target.swift-framework-search-paths {frameworks}",
                )
            else:
                lldb.debugger.HandleCommand(
                    "settings clear target.swift-framework-search-paths",
                )

            includes = " ".join([
                f'"{path}"'
                for path in settings.get("s", [])
            ])
            if includes:
                lldb.debugger.HandleCommand(
                    f"settings set -- target.swift-module-search-paths {includes}",
                )
            else:
                lldb.debugger.HandleCommand(
                    "settings clear target.swift-module-search-paths",
                )

            clang = settings.get("c")
            if clang:
                lldb.debugger.HandleCommand(
                    f"settings set -- target.swift-extra-clang-flags '{clang}'",
                )
            else:
                lldb.debugger.HandleCommand(
                    "settings clear target.swift-extra-clang-flags",
                )

        return True
